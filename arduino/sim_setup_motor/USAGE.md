# 电机ID设置程序 - 使用说明

## 🚀 快速开始

### 1. 上传程序
- 打开 `sim_setup_motor.ino`
- 选择ESP32开发板
- 上传程序

### 2. 打开串口监视器
- 波特率：115200
- 会看到：`=== 小米电机ID设置程序 ===`

### 3. 测试通信
```bash
test
```
如果显示 `✅ CAN通信正常！` 则可以继续

## 📋 主要命令

### 🔍 查看和测试
```bash
test              # 测试CAN通信
scan              # 扫描1-127所有电机
scan 1 20         # 扫描指定范围
verify            # 验证已设置电机
help              # 显示帮助
```

### 🔧 设置电机ID
```bash
set 1 2           # 将ID=1改为ID=2
batch 5           # 批量设置：从ID=5开始
reset 3           # 重置电机3
```

## 🎯 推荐使用流程

### 场景1：设置3个电机为ID=1,2,3
```bash
test              # 1. 测试通信
batch 3           # 2. 批量设置
# 连接第1个电机，按回车 → ID=1
# 连接第2个电机，按回车 → ID=2
# 连接第3个电机，按回车 → ID=3
verify            # 3. 验证结果
```

### 场景2：精确设置特定ID
```bash
test              # 1. 测试通信
scan              # 2. 查看当前ID
set 7 1           # 3. 将ID=7改为ID=1
verify            # 4. 验证修改
```

## ⚠️ 重要注意事项

1. **修改ID时**：总线上只能连接**一个电机**！
2. **修改完成后**：断开电机，连接下一个，继续修改
3. **所有电机设置完成后**：可以全部连接到总线
4. **ID范围**：1-127

## 🔧 故障排除

### test命令失败？
- 检查CAN连接线
- 检查电机电源(12-24V)
- 检查波特率(1Mbps)

### scan扫描不到？
- 先运行test命令
- 只连接一个电机测试

### set命令失败？
- 确保总线上只有一个电机
- 先运行test确认通信正常

---

**简单使用流程**：test → batch/scan/set → verify ✅